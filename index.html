<!DOCTYPE html>
<html lang="no">
<head>
<meta charset="UTF-8">
<title>Kube som hopper</title>
<style>
 body {
   margin: 0;
   background: #222;
   display: flex;
   justify-content: center;
   align-items: center;
   height: 100vh;
 }
 canvas {
   background: #111;
   border: 2px solid white;
 }
</style>
</head>
<body>
<canvas id="game" width="800" height="300"></canvas>
<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
// Spiller (kube)
const player = {
 x: 150,
 y: 220,
 size: 30,
 yVel: 0,
 gravity: 0.8,
 jump: -13,
 onGround: true
};
// Spisse blokker
let spikes = [];
let speed = 5;
// Lag ny spike
function newSpike() {
 spikes.push({
   x: canvas.width,
   width: 30,
   height: 30
 });
}
setInterval(newSpike, 1500);
function updatePlayer() {
 player.yVel += player.gravity;
 player.y += player.yVel;
 if (player.y >= 220) {
   player.y = 220;
   player.yVel = 0;
   player.onGround = true;
 }
}
function updateSpikes() {
 spikes.forEach(spike => spike.x -= speed);
 spikes = spikes.filter(spike => spike.x > -40);
}
function drawPlayer() {
 ctx.fillStyle = "#00ffcc";
 ctx.fillRect(player.x, player.y, player.size, player.size);
}
function drawSpikes() {
 ctx.fillStyle = "red";
 spikes.forEach(spike => {
   ctx.beginPath();
   ctx.moveTo(spike.x, 250);
   ctx.lineTo(spike.x + spike.width / 2, 250 - spike.height);
   ctx.lineTo(spike.x + spike.width, 250);
   ctx.closePath();
   ctx.fill();
 });
}
function collision() {
 spikes.forEach(spike => {
   if (
     player.x < spike.x + spike.width &&
     player.x + player.size > spike.x &&
     player.y + player.size > 250 - spike.height
   ) {
     alert("Game Over!");
     location.reload();
   }
 });
}
function loop() {
 ctx.clearRect(0, 0, canvas.width, canvas.height);
 // Bakke
 ctx.fillStyle = "#555";
 ctx.fillRect(0, 250, canvas.width, 50);
 updatePlayer();
 updateSpikes();
 collision();
 drawPlayer();
 drawSpikes();
 requestAnimationFrame(loop);
}
document.addEventListener("keydown", e => {
 if (e.code === "Space" && player.onGround) {
   player.yVel = player.jump;
   player.onGround = false;
 }
});
loop();
</script>
</body>
</html>
