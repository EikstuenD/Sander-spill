<!DOCTYPE html>
<html lang="no">
<head>
<meta charset="UTF-8">
<title>Kube Hopper</title>
<style>
 body {
   margin: 0;
   background: #222;
   display: flex;
   justify-content: center;
   align-items: center;
   height: 100vh;
   color: white;
   font-family: Arial;
 }
 canvas {
   background: #111;
   border: 2px solid white;
 }
</style>
</head>
<body>
<canvas id="game" width="800" height="300"></canvas>
<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
// Spiller
const player = {
 x: 150,
 y: 220,
 size: 30,
 yVel: 0,
 gravity: 0.8,
 jump: -13,
 onGround: true
};
// Spill-variabler
let spikes = [];
let speed = 5;
let score = 0;
let highscore = localStorage.getItem("highscore") || 0;
// Lag spiss blokk
function newSpike() {
 spikes.push({
   x: canvas.width,
   width: 30,
   height: 30
 });
}
setInterval(newSpike, 1400);
// Oppdater spiller
function updatePlayer() {
 player.yVel += player.gravity;
 player.y += player.yVel;
 if (player.y >= 220) {
   player.y = 220;
   player.yVel = 0;
   player.onGround = true;
 }
}
// Oppdater hindringer
function updateSpikes() {
 spikes.forEach(spike => spike.x -= speed);
 spikes = spikes.filter(spike => spike.x > -40);
}
// Kollisjon
function collision() {
 spikes.forEach(spike => {
   if (
     player.x < spike.x + spike.width &&
     player.x + player.size > spike.x &&
     player.y + player.size > 250 - spike.height
   ) {
     if (score > highscore) {
       localStorage.setItem("highscore", score);
     }
     alert("Game Over!\nScore: " + score + "\nHighscore: " + Math.max(score, highscore));
     location.reload();
   }
 });
}
// Tegning
function drawPlayer() {
 ctx.fillStyle = "#00ffcc";
 ctx.fillRect(player.x, player.y, player.size, player.size);
}
function drawSpikes() {
 ctx.fillStyle = "red";
 spikes.forEach(spike => {
   ctx.beginPath();
   ctx.moveTo(spike.x, 250);
   ctx.lineTo(spike.x + spike.width / 2, 250 - spike.height);
   ctx.lineTo(spike.x + spike.width, 250);
   ctx.closePath();
   ctx.fill();
 });
}
// Poeng og fart
function updateScore() {
 score++;
 if (score % 300 === 0) {
   speed += 0.5; // Øker farten over tid
 }
}
// UI
function drawUI() {
 ctx.fillStyle = "white";
 ctx.font = "16px Arial";
 ctx.fillText("Score: " + score, 10, 20);
 ctx.fillText("Highscore: " + highscore, 10, 40);
}
// Spill-løkke
function loop() {
 ctx.clearRect(0, 0, canvas.width, canvas.height);
 // Bakke
 ctx.fillStyle = "#555";
 ctx.fillRect(0, 250, canvas.width, 50);
 updatePlayer();
 updateSpikes();
 updateScore();
 collision();
 drawPlayer();
 drawSpikes();
 drawUI();
 requestAnimationFrame(loop);
}
// Kontroll
document.addEventListener("keydown", e => {
 if (e.code === "Space" && player.onGround) {
   player.yVel = player.jump;
   player.onGround = false;
 }
});
loop();
</script>
</body>
</html>
